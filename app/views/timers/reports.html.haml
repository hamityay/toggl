.app-dashboard.shrink-medium
  .row.expanded.app-dashboard-top-nav-bar
    .columns.medium-2
      .align-left
        %button.menu-icon.hide-for-medium{"data-toggle" => "app-dashboard-sidebar"}
      .app-dashboard-logo.align-right
        = link_to "Toggl", root_path
    .columns.show-for-medium
    .columns.shrink.app-dashboard-top-bar-actions
  .app-dashboard-body.off-canvas-wrapper
    = render "partial"
    .app-dashboard-body-content.off-canvas-content{"data-off-canvas-content" => ""}
      = search_form_for @search, url: reports_timer_path, builder: SimpleForm::FormBuilder, html: {class: 'form-inline', data: { turboform: true }} do |f|
        .grid-x.grid-padding-x
          .cell.medium-2
            = f.input_field :info_or_type_name_or_user_name_cont, label: false, class: 'form-control', placeholder: "Enter for search"
          .cell.medium-2
            = f.input :user_id_in, label: false, collection: get_users, multiple: true, include_blank: "Select User", input_html: { multiple: true }
          .cell.medium-2
            = f.input :type_id_in, label: false, collection: get_types, multiple: true, include_blank: "Select Type", input_html: { multiple: true }
          .cell.medium-2
            = f.input :start_gteq, label: "First Date:", as: :datetime, value: ((params[:q].present? and params[:q][:start_gteq].present?) ? params[:q][:start_gteq].to_datetime : DateTime.now - 1.week), hint: "Eklenen zmanların başlangıç tarihlerine göre filtrelemektedir.", 'data-toggle' => 'tooltip'
          .cell.medium-2
            = f.input :start_lteq, label: "Second Date:", as: :datetime,  value: ((params[:q].present? and params[:q][:start_lteq].present?) ? params[:q][:start_lteq].to_datetime : DateTime.now), hint: "Eklenen zmanların başlangıç tarihlerine göre filtrelemektedir.", 'data-toggle' => 'tooltip'
          .cell.medium-2
            = f.button :submit
      %h2.text-center= "Listing Times -# " + @timers.count.to_s + " -"
      = link_to reports_timer_path(format: :xlsx, params: params.permit!) do
        %i.fi-page-export
      %table.responsive-card-table.unstriped
        %thead
          %tr
            %th Info
            %th User
            %th Type
            %th Start
            %th Finish
            %th Duration
        %tbody
          - @timers.each do |time|
            %tr
              %td{"data-label" => "Info"}= time.info
              %td{"data-label" => "Username"}= time.user.username
              %td{"data-label" => "Type"}= time.type.name
              %td{"data-label" => "Start"}= time.start
              %td{"data-label" => "Finish"}= time.finish
              %td{"data-label" => "Duration"}= time.duration.to_s + " min."
